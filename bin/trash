#!/usr/bin/env bash

# copied for https://codeberg.org/EvanHahn/dotfiles/src/commit/843b9ee13d949d346a4a73ccee2a99351aed285b/home/bin/bin/trash

set -e
set -u
set -o pipefail

if [[ "$(uname)" == 'Darwin' ]]; then
  # Heavily modified from [this script][0], licensed under the MIT License.
  # [0]: https://github.com/morgant/tools-osx/blob/71c2db389c48cee8d03931eeb083cfc68158f7ed/src/trash#L293-L311
  for arg in "$@"; do
    file="$(realpath "$arg")"
    /usr/bin/osascript -e "tell application \"Finder\" to delete POSIX file \"$file\"" > /dev/null
  done
else
  gio trash "$@"
fi
